<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ card.name }} - Digital Visiting Card</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .card-container { max-width: 400px; margin: 0 auto; }
        .profile-card { background: {{ card.background_color or '#ffffff' }}; color: {{ card.text_color or '#000000' }}; border-radius: 20px; overflow: hidden; box-shadow: 0 20px 60px rgba(0,0,0,0.3); }
        .profile-header { padding: 40px 20px; text-align: center; background: linear-gradient(135deg, {{ company.primary_color or '#4F46E5' }} 0%, {{ company.secondary_color or '#10B981' }} 100%); color: white; }
        .profile-avatar { width: 100px; height: 100px; border-radius: 50%; background: white; margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; font-size: 40px; color: {{ company.primary_color or '#4F46E5' }}; }
        .profile-body { padding: 30px 20px; }
        .contact-item { display: flex; align-items: center; padding: 12px 0; border-bottom: 1px solid #eee; }
        .contact-item:last-child { border-bottom: none; }
        .contact-icon { width: 40px; height: 40px; border-radius: 50%; background: {{ company.primary_color or '#4F46E5' }}; color: white; display: flex; align-items: center; justify-content: center; margin-right: 15px; flex-shrink: 0; }
        .contact-info a { color: inherit; text-decoration: none; }
        .action-buttons { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 20px; }
        .action-btn { padding: 15px; border-radius: 10px; text-align: center; text-decoration: none; font-weight: 500; }
        .btn-call { background: #10B981; color: white; }
        .btn-whatsapp { background: #25D366; color: white; }
        .btn-email { background: #4F46E5; color: white; }
        .btn-save { background: #F59E0B; color: white; }
        {% if company and not company.white_label_enabled %}
        .powered-by { text-align: center; padding: 20px; color: rgba(255,255,255,0.8); font-size: 12px; }
        {% endif %}
    </style>
</head>
<body>
    <div class="container py-4">
        <div class="card-container">
            <div class="profile-card">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <i class="bi bi-person"></i>
                    </div>
                    <h2 class="mb-1">{{ card.name }}</h2>
                    {% if card.designation %}<p class="mb-1">{{ card.designation }}</p>{% endif %}
                    {% if company %}<p class="mb-0 opacity-75">{{ company.name }}</p>{% endif %}
                </div>
                <div class="profile-body">
                    {% if card.bio %}
                    <p class="text-center mb-4">{{ card.bio }}</p>
                    {% endif %}
                    <div class="contact-list">
                        <div class="contact-item">
                            <div class="contact-icon"><i class="bi bi-telephone"></i></div>
                            <div class="contact-info"><a href="tel:{{ card.phone }}">{{ card.phone }}</a></div>
                        </div>
                        {% if card.whatsapp %}
                        <div class="contact-item">
                            <div class="contact-icon" style="background: #25D366;"><i class="bi bi-whatsapp"></i></div>
                            <div class="contact-info"><a href="https://wa.me/{{ card.whatsapp|replace('+', '') }}">{{ card.whatsapp }}</a></div>
                        </div>
                        {% endif %}
                        {% if card.email %}
                        <div class="contact-item">
                            <div class="contact-icon"><i class="bi bi-envelope"></i></div>
                            <div class="contact-info"><a href="mailto:{{ card.email }}">{{ card.email }}</a></div>
                        </div>
                        {% endif %}
                        {% if card.address %}
                        <div class="contact-item">
                            <div class="contact-icon"><i class="bi bi-geo-alt"></i></div>
                            <div class="contact-info">{{ card.address }}</div>
                        </div>
                        {% endif %}
                    </div>
                </div>
                <div class="action-buttons">
                    <a href="tel:{{ card.phone }}" class="action-btn btn-call"><i class="bi bi-telephone-fill me-2"></i>Call</a>
                    <a href="https://wa.me/{{ (card.whatsapp or card.phone)|replace('+', '') }}" class="action-btn btn-whatsapp"><i class="bi bi-whatsapp me-2"></i>WhatsApp</a>
                    {% if card.email %}
                    <a href="mailto:{{ card.email }}" class="action-btn btn-email"><i class="bi bi-envelope-fill me-2"></i>Email</a>
                    {% endif %}
                    <a href="{{ url_for('card.save_contact', uid=card.uid) }}" class="action-btn btn-save"><i class="bi bi-person-plus-fill me-2"></i>Save</a>
                </div>
            </div>
            {% if company and not company.white_label_enabled %}
            <div class="powered-by">
                Powered by {{ master_settings.platform_name if master_settings else 'Digital Card Platform' }}
            </div>
            {% endif %}
        </div>
    </div>
    <form id="enquiry-form" method="post" action="{{ url_for('card.submit_enquiry', uid=card.uid) }}" style="display: none;">
        <input type="hidden" name="action" id="action-type">
    </form>
</body>
</html>
